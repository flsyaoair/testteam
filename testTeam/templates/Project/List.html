{% extends 'TestTeamLayout.html'%}
{% block subcontent %}
<div class="post row" ng-controller="ProjectCtrl" ng-init="query()" style="min-height: 98%;_min-height: 98%">
	<ul id="myTab" class="nav nav-tabs" ng-controller="ClassCtrl" ng-init="query_class()">
		<li><a href="#AllView" data-toggle="tab" ng-click="Query.ClassName='all';query()">全部</a></li>
		<li ng-repeat="Class in ClassesList">
			<a class="dropdown-toggle" href="#View{{Class.ClassId}}" data-toggle="tab" ng-mouseenter="test()" ng-click="Query.ClassName=Class.ClassName;query()">{{Class.ClassName}}</a>
		</li>
		<li><a href="" data-toggle="tab" ng-click="newclass()"> <i class="fa fa-plus fa-fw" style="height: 20px;"></i> </a></li>
		<script> $(function () {
		    $('#myTab a:first').tab('show')
		  }) 
		</script>
		<div class="modal fade" id="class_add" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title" id="myModalLabel"><i class="fa fa-plus fa-fw"></i>创建新分类</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal" role="form" name="createClassForm" novalidate >
							<div class="form-group"  ng-class="{ 'has-error' : (createClassForm.Name.$dirty&&createClassForm.Name.$error.required) }">
								<label class="col-sm-2 control-label text-right"><span class="text-danger">*</span>分类名称</label>
								<div class="col-sm-6">
									<input class="form-control" ng-model="Class.Name" type="text" name="Name" placeholder="分类名称" required />
								</div>
								<div class="col-sm-3">
					            	<div ng-show="createClassForm.Name.$dirty&&createClassForm.Name.$error.required" class="control-label text-danger" style="text-align: left;">请输入分类名称</div>
					            	<div ng-show="isExist" class="control-label text-danger" style="text-align: left;">分类名已存在！</div>
					            </div>
							</div>
							<div class="row">
								<div class="col-sm-4 col-sm-push-2">
									<label class="checkbox" ng-repeat="Project in ProjectListInEdit">
										<input type="checkbox" ng-click="toggle(Project)">{{Project.ProjectName}}
									</label>
								</div>
							</div>
						</form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times-circle fa-fw"></i>关闭</button>
                        <button type="button" id="btnCreateClass" class="btn btn-primary" ng-disabled="createClassForm.$invalid" data-loading-text="正在创建" ng-click="create()"><i class="fa fa-save fa-fw"></i>创建</button>
                    </div>
                </div>
            </div>
        </div>
	</ul>
    <br>
	<div class="col-sm-3">
		<div id="onlyone" class="list-group tag-sidebar">
			<div class="list-group-item" style="background-color: rgba(222, 222, 222, 0.4);">
				<div class="row">
					<div class="col-xs-8"><strong>项目列表</strong></div>
					<div class="col-xs-4 text-right" style="margin-top: 0px;">
						<button type="button" class="btn btn-primary btn-xs" data-toggle="modal" data-target="#project_add"><i class="fa fa-plus"></i></button>
						
					</div>
				</div>
			</div>
			<div class="panel" ng-repeat="Project in ProjectList" style="margin-bottom: 0px; border: 0px;">
				<a class="list-group-item" data-toggle="collapse" data-parent="#onlyone" href="#project{{Project.ProjectId}}" ng-click="toggle('#demo' + Project.ProjectId)" style="border-radius: 0px;">{{Project.ProjectName}}</a>
				<div id="project{{Project.ProjectId}}" class="list-group tag-sidebar panel-collapse collapse" style="margin-bottom: 0px;">
					<a class="list-group-item" href="#home" data-toggle="tab" style="background-color: #D1DFEA;"> <i class="fa fa-angle-right"></i> Link</a>
					<a class="list-group-item" href="#home2" data-toggle="tab" style="background-color: #D1DFEA;"> <i class="fa fa-angle-right"></i> Link</a>
					<a class="list-group-item" href="#" style="background-color: #eee;"> <i class="fa fa-angle-right"></i> Link</a>
					<a class="list-group-item" href="#" style="background-color: #eee;"> <i class="fa fa-tag"></i> Link</a>
              	</div>
        	</div>
        </div>
		<div class="modal fade" id="project_add" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	        <div class="modal-dialog">
	            <div class="modal-content">
	                <div class="modal-header">
	                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
	                    <h4 class="modal-title" id="myModalLabel"><i class="fa fa-plus fa-fw"></i>创建新项目</h4>
	                </div>
                    <div class="modal-body">
                        <form role="form" name="createProjectForm">
                            <div class="form-group">
                                <label for="ProjectName">项目名称<span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="ProjectName" name="ProjectName" ng-model="Project.ProjectName" placeholder="项目名称" required />
                                <div ng-show="createProjectForm.ProjectName.$dirty&&createProjectForm.ProjectName.$error.required" class="text-danger">请输入项目名称</div>
                                <br>
                                <label for="Introduction">项目介绍</label>
                                <textarea rows="3" type="text" class="form-control" id="Introduction" name="Introduction" ng-model="Project.Introduction" placeholder="项目介绍" /></textarea> 
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times-circle fa-fw"></i>关闭</button>
                        <button type="button" id="btnCreateProject" ng-disabled="createProjectForm.$invalid" class="btn btn-primary" data-loading-text="正在创建" ng-click="create();"><i class="fa fa-save fa-fw"></i>保存</button>
                    </div>
                </div>
            </div>
        </div>
	</div>
	<div class="col-sm-9">
		<div id="myTabContent" class="tab-content" ng-controller="ClassCtrl" ng-init="query_class()">
			<div class="tab-pane fade active" id="AllView"> </div>
			<div class="tab-pane fade text-right"  ng-repeat="Class in ClassesList" id="View{{Class.ClassId}}"> 
				<div class="btn-group">
					<button type="button" id="btnOpenEditClass" class="btn btn-success btn-xs" ng-click="UpdateClass.OldName=Class.ClassName;openUpdateClass()">更新分类</button>
                    <button type="button" id="btnDeleteClass" class="btn btn-danger btn-xs" data-loading-text="正在删除" ng-click="DeleteClass.Name=Class.ClassName;deleteClass()" ng-disabled="Class.Creator!=((session['userid']))">删除分类</button>
				</div>
			</div>
			<div class="modal fade" id="class_edit" tabindex;="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		        <div class="modal-dialog">
		            <div class="modal-content">
		                <div class="modal-header">
		                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		                    <h4 class="modal-title" id="myModalLabel"><i class="fa fa-pencil-square-o fa-fw"></i>更新分类({{UpdateClass.OldName}})</h4>
		                </div>
		                <div class="modal-body">
		                    <form class="form-horizontal" role="form" name="updateClassForm" novalidate >
								<div class="form-group"  ng-class="{ 'has-error' : (updateClassForm.Name.$dirty&&updateClassForm.Name.$error.required) }">
									<label class="col-sm-2 control-label text-right"><span class="text-danger">*</span>分类名称</label>
									<div class="col-sm-6">
										<input class="form-control" ng-model="UpdateClass.NewName" type="text" name="NewName" placeholder="分类名称" required />
									</div>
									<div class="col-sm-3">
						            	<div ng-show="updateClassForm.Name.$dirty&&updateClassForm.Name.$error.required" class="control-label text-danger" style="text-align: left;">请输入分类名称</div>
						            	<div ng-show="isExist" class="control-label text-danger" style="text-align: left;">分类名已存在！</div>
						            </div>
								</div>
								<div class="row">
									<div class="col-sm-4 col-sm-push-2">
										<label class="checkbox" ng-repeat="Project in ProjectListInEdit">
											<input type="checkbox" ng-model="Project.IsChecked" ng-click="toggle2(Project)">{{Project.ProjectName}}
										</label>
									</div>
								</div>
							</form>
	                    </div>
	                    <div class="modal-footer">
	                        <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times-circle fa-fw"></i>关闭</button>
	                        <button type="button" id="btnUpdateClass" class="btn btn-primary" ng-disabled="updateClassForm.$invalid" data-loading-text="正在保存" ng-click="Query.ClassName=UpdateClass.NewName;update()"><i class="fa fa-save fa-fw"></i>保存</button>
	                    </div>
	                </div>
	            </div>
	        </div>
		</div>
		<div class="">
            <div id="myTabContent" class="tab-content">
             <div class="panel-group" id="onlyone">
             	<div ng-repeat="Project in ProjectList">
              		<div id="demo{{Project.ProjectId}}" class="collapse" > {{Project.Introduction}} <hr><hr><hr></div> 
             	</div>
             </div>
              <div class="tab-pane fade" id="home">
                <table class="table table-striped table-hover">  
			      <thead>  
			        <tr>  
			          <th>版本号</th>  
			          <th>下载</th>
			          <th>部署</th>
			          <th>加载</th>  
			        </tr>  
			      </thead>  
			      <tbody>  
			        <tr>  
			          <td>v1.0.1</td>  
			          <td><a href="">下载</a></td> 
			          <td><a href="">部署</a></td>  
			          <td><a href="">加载</a></td>
			        </tr>
			        <tr>  
			          <td>v1.0.2</td>  
			          <td><a href="">下载</a></td> 
			          <td><a href="">部署</a></td>  
			          <td><a href="">加载</a></td>  
			        </tr>
			        <tr>  
			          <td>v1.0.3</td>  
			          <td><a href="">下载</a></td> 
			          <td><a href="">部署</a></td>  
			          <td><a href="">加载</a></td>  
			        </tr>
			        <tr>  
			          <td>v1.0.4</td>  
			          <td><a href="">下载</a></td> 
			          <td><a href="">部署</a></td>  
			          <td><a href="">加载</a></td>  
			        </tr>
			      </tbody>  
			    </table>  
              </div>
              <div class="tab-pane fade" id="home2">
					    test
              </div>
              <div class="tab-pane fade" id="dropdown1">
                <p>Etsy mixtape wayfarers, ethical wes anderson tofu before they sold out mcsweeney's organic lomo retro fanny pack lo-fi farm-to-table readymade. Messenger bag gentrify pitchfork tattooed craft beer, iphone skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy irony. Leggings gentrify squid 8-bit cred pitchfork. Williamsburg banh mi whatever gluten-free, carles pitchfork biodiesel fixie etsy retro mlkshk vice blog. Scenester cred you probably haven't heard of them, vinyl craft beer blog stumptown. Pitchfork sustainable tofu synth chambray yr.</p>
              </div>
              <div class="tab-pane fade" id="dropdown2">
                <p>Trust fund seitan letterpress, keytar raw denim keffiyeh etsy art party before they sold out master cleanse gluten-free squid scenester freegan cosby sweater. Fanny pack portland seitan DIY, art party locavore wolf cliche high life echo park Austin. Cred vinyl keffiyeh DIY salvia PBR, banh mi before they sold out farm-to-table VHS viral locavore cosby sweater. Lomo wolf viral, mustache readymade thundercats keffiyeh craft beer marfa ethical. Wolf salvia freegan, sartorial keffiyeh echo park vegan.</p>
              </div>
			</div>
		</div>
	</div>
</div>
{% endblock %}